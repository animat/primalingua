<html>
	<head>
		<link rel="stylesheet" type="text/css" href="style.css" />
		<link href='http://fonts.googleapis.com/css?family=Nunito' rel='stylesheet' type='text/css'>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script src="jquery.populate.pack.js"></script>
		<link href='http://fonts.googleapis.com/css?family=Nunito' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="resource_css.css" />
		<link rel="stylesheet" type="text/css" href="workbook.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
		<script src="http://jqueryui.com/ui/jquery.ui.widget.js"></script>
		<script src="http://jqueryui.com/ui/jquery.ui.accordion.js"></script>
		<script>
			var student = 2;
			var lesson = 1;
			var currentPosition = 0;
			
			var points_to_consider;
			var terms;
			var vocab;
			var links;
			var games;
			
			var num = window.innerHeight;
			var excludedHeight;
			var middleHeight;
			var middle;
			var workbook;
			$(function() {
				$( "#accordion" ).accordion();
			});
			function load() {
				excludedHeight = document.getElementById('head').offsetHeight + 16;
				middleHeight = num - excludedHeight + 15;
				middle = document.getElementById('workspace');
				middle.style.height = middleHeight;
				
				points_to_consider = document.getElementById('acc1');
				terms = document.getElementById('acc2');
				vocab = document.getElementById('acc3');
				links = document.getElementById('acc4');
				games = document.getElementById('acc5');
				getResources();
				workbook = document.getElementById('workbook');
				$.ajax({
					url: "getSelectMenu.php",
					success: function(resp) {
						lesson_select.innerHTML = resp;
						lessonPlanMenu = document.getElementById('lessonPlanMenu');
						getResources();
						getLessonPlan();
					}
				});
				
				//Just incase textareas by default are not disabled
				var feedback_txts = document.getElementsByClassName('feedback_txt');
				for (var i = 0; i < feedback_txts.length; i++) {
					feedback_txts[i].disabled = true;
				}
			}
			function toggleResources() {
				if (currentPosition == 0) {
					$('#resource').animate({
						width: ['1', 'swing'],
					}, "slow" );
					currentPosition = -400;
				} else {
					$('#resource').animate({
						width: ['400', 'swing'],
					}, "slow" );
					currentPosition = 0;
				}
			}
			function populate() {
				$.getJSON("getAnswersAndFeedback.php?student_id="+student+"&lesson_id="+lesson, function(data) {
					$("#workbook #content").populate(jQuery.parseJSON(data));
				});
			}
			function getResources() {
				$.ajax({
					url: "getResources.php?lesson_id="+lesson+"&type=points to consider",
					success: function(resp) {
						points_to_consider.innerHTML = "<p class='resources_title'>Points to consider for "+lesson+"!</p>"+resp;
					}
				});
				$.ajax({
					url: "getResources.php?lesson_id="+lesson+"&type=terms",
					success: function(resp) {
						terms.innerHTML = "<p class='resources_title'>Terms for "+lesson+"!</p>"+resp;
					}
				});	
				$.ajax({
					url: "getResources.php?lesson_id="+lesson+"&type=vocab",
					success: function(resp) {
						vocab.innerHTML = "<p class='resources_title'>Vocabulary for "+lesson+"!</p>"+resp;
					}
				});	
				$.ajax({
					url: "getResources.php?lesson_id="+lesson+"&type=links",
					success: function(resp) {
						links.innerHTML = "<p class='resources_title'>Other links for "+lesson+"!</p>"+resp;
					}
				});	
				$.ajax({
					url: "getResources.php?lesson_id="+lesson+"&type=games",
					success: function(resp) {
						games.innerHTML = "<p class='resources_title'>Practice with games for "+lesson+"!</p>"+resp;
					}
				});	
			}
			window.onresize = function() {
				num = window.innerHeight;
				middleHeight = num - excludedHeight + 15;
				middle.style.height = middleHeight;
			}
			function getLessonPlan() {
				lesson = lessonPlanMenu.options[lessonPlanMenu.selectedIndex].value.toString();
				$.ajax({
					url: "getLesson.php?lesson_id="+lesson,
					success: function(resp) {
						workbook.innerHTML = resp;
						getResources();
						populate();
					}
				});
			}
			function updateFeedbackImage(num) {
				$.ajax({
					url: "getFeedbackStatus.php?student_id="+student+"&q_id="+num,
					success: function(status) {
						var image = document.getElementById('f_'+num+'_image');
						if (status == "correct") {
							image.setAttribute('src', 'images/check.png');
						} else if (status == "incorrect") {
							image.setAttribute('src', 'images/x.png');
						} else if (status == "incomplete") {
							image.setAttribute('src', 'images/error.png');
						}
					}
				});	
			}
			function updateAnswer(q_id) {
				var q_answer = document.getElementsByName('q_'+q_id)[0];
				$.ajax({
					url: "updateAnswer.php?student_id="+student+"&q_id="+q_id+"&content="+q_answer.value,
					success: function(resp) {
					}
				});
			}
		</script>
	</head>
	<body onLoad="load();">
		<div id="head">
			<div id="topnav">
				<div id="logo">
				</div>
				<div id="nav">
				<div id="buttons">
					<img src="images/button_home.png" />
					<img src="images/button_notification.png" />
					<img src="images/button_settings.png" />
				</div>
			</div>
			</div>
			<div id="timeline">
				<a href="arrow_right" id="arrow_right"></a>
				<a href="arrow_left" id="arrow_left"></a>
			</div>
		</div>
		<div id="workspace">
			<div id="side1">
				<div id="lesson_select"></div>
				<div id="workbook">
				
				</div>
			</div>
			<div id="container">
			<div id="resource_button" onclick="toggleResources();"><img src="images/resource_button.png" /></div>
			<div id="resource">
				<div id="spacing">
					<div id="accordion">
						<h3 id="points_to_consider"><a href="#">Points to Consider</a></h3>
						<div id="individual">
							<p id="acc1">	
								Stuff
							</p>
						</div>
						<h3 id="terms"><a href="#">Terms</a></h3>
						<div id="individual">
							<p id="acc2">
								This will have terms in it!
							</p>
						</div>
						<h3 id="vocab"><a href="#">Vocab</a></h3>
						<div id="individual">
							<p id="acc3">
								This will have vocab!
							</p>
						</div>
						<h3 id="links"><a href="#">Links</a></h3>
						<div id="individual">
							<p id="acc4">
								This will have links to other things!
							</p>
							<ul>
								<li>List item one</li>
								<li>List item two</li>
								<li>List item three</li>
							</ul>
						</div>
						<h3 id="games"><a href="#">Games</a></h3>
						<div id="individual">
							<p id="acc5">
								This will contain links to games!
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>