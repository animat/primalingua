<% content_for :page_script do %>
<script type="text/javascript">
	$(document).ready(function() {
		resizeWindow();
		$("#lesson_select_menu").on('change', function(val) {
			var loc = $(this).val();
			location.href = "<%= planning_teachers_path %>/"+loc;
		});
	});
	window.onresize = function() {
		resizeWindow();
	}
	function resizeWindow() {
		var num = window.innerHeight;
		var middleHeight = window.innerHeight - (document.getElementById('head').offsetHeight + 16) + 15;
		var middle = document.getElementById('workspace');
		$(middle).css("height", middleHeight);
	}
</script>
<% end %>
<% content_for :head do %>
	<style>
		#content {
			margin: 20px;
		}
	</style>
<% end %>

<% if current_teacher.premium %>
<div id="lessonplan" class="half_width">
	<div id="lessons">
		<div id="selectMenu">
			<%= grouped_collection_select :lesson, :id, Unit.all, :lessons, :title, :id, :title, {}, {:id => "lesson_select_menu"}%>
		</div>
		<div id="lessonplans">
			<%= @lesson_plan.content.gsub("\\r\\n", "").html_safe %>
		</div>
	</div>
</div>

<div id="workbook_example" class="half_width">
	<div id="workbook_tools">
	</div>
	<% unless flash[:notice].nil? %>
		<p class="flash_notice"><%= flash[:notice]%></p>
	<% end %>
	<% unless flash[:error].nil? %>
		<p class="flash_error"><%= flash[:error] %></p>
	<% end %>
	<div id="lesson">
		<%= @workbook_content.html_safe %>
	</div>
</div>
<% else %>
<div id="lessonplan" class="full_width">
	<div id="lessons">
		<div id="selectMenu">
			<%= grouped_collection_select :lesson, :id, Unit.all, :lessons, :title, :id, :title, {}, {:id => "lesson_select_menu"}%>
		</div>
		<div id="lessonplans">
			<%= @lesson_plan.content.gsub("\\r\\n", "").html_safe %>
		</div>
	</div>
</div>
<% end %>